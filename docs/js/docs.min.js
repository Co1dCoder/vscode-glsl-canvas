!function(){"use strict";var e=function(){function e(){var e=this;e.mouse=new Float32Array([0,0]),e.history=[],e.trails=new Array(10).fill(null).map(function(){return new Float32Array([0,0])})}e.prototype={render:function(e){var n=this,t=n.trails,r=n.history,a=n.mouse,o=0,i=t.length,l=r.length?r[0]:a;for(;o<i;){var s=o>0?t[o-1]:l,u=t[o],c=1/(5+o);u[0]+=(s[0]-u[0])*c,u[1]+=(s[1]-u[1])*c,n.update(e,"2fv","vec2","u_trails["+o+"]",u),o++}r.length&&r.shift()},move:function(e,n){var t=this.mouse;t[0]=e,t[1]=n,this.push()},push:function(e,t,r){var a,o,i,l=null,s=0;r||(r={});var u=function(){s=!1===r.leading?0:n(),l=null,i=e.apply(a,o),l||(a=o=null)};return function(){var c=n();s||!1!==r.leading||(s=c);var f=t-(c-s);return a=this,o=arguments,f<=0||f>t?(l&&(clearTimeout(l),l=null),s=c,i=e.apply(a,o),l||(a=o=null)):l||!1===r.trailing||(l=setTimeout(u,f)),i}}(function(){this.history.push(new Float32Array(this.mouse))},1e3/60),update:function(e,n,t,r,a){try{var o=e.uniforms[r]=e.uniforms[r]||{};o.name=r,o.value=a,o.type=t,o.method="uniform"+n,o.location=e.gl.getUniformLocation(e.program,r),e.gl[o.method].apply(e.gl,[o.location].concat(o.value))}catch(e){console.log("fastUpdate",e)}}};var n=Date.now||function(){return(new Date).getTime()};return e}();window.TrailsService=e}(),function(){"use strict";var e,n=new TrailsService;function t(e,n){var t=new XMLHttpRequest;t.open("GET",e,!0),t.addEventListener("load",function(){n(t.responseText)}),t.send()}e="",t("playgrounds/lib.glsl",function(r){e=r;var a=function(e){if(""==e)return{};for(var n={},t=0;t<e.length;++t){var r=e[t].split("=",2);1==r.length?n[r[0]]="":n[r[0]]=decodeURIComponent(r[1].replace(/\+/g," "))}return n}(window.location.search.substr(1).split("&")),o=a.glsl||"main";t("playgrounds/"+o+".glsl",function(t){var r=document.querySelector(".editor");r.innerHTML=t;var a=new GlslEditor(r,{canvas_size:400,canvas_draggable:!0,fileDrops:!1,frag_header:e,menu:!1,multipleBuffers:!1,theme:"monokai",watchHash:!1}),o=a.shader.canvas;o.uniformTexture("u_texture_0","https://rawgit.com/actarian/plausible-brdf-shader/master/textures/noise/cloud-1.png",{filtering:"mipmap",repeat:!0}),o.on("render",function(){n.render(o),o.forceRender=!0}),o.canvas.addEventListener("mousemove",function(e){n.move(e.x-a.shader.el.offsetLeft,a.shader.el.offsetTop+a.shader.el.offsetHeight-e.y)})})})}();
//# sourceMappingURL=docs.min.js.map
