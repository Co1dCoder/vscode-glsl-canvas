!function(){"use strict";var t=function(){function t(t,n,e){this.x=t||0,this.y=n||0,this.z=e||0}return t.prototype={negative:function(){return new t(-this.x,-this.y,-this.z)},add:function(n){return n instanceof t?new t(this.x+n.x,this.y+n.y,this.z+n.z):new t(this.x+n,this.y+n,this.z+n)},subtract:function(n){return n instanceof t?new t(this.x-n.x,this.y-n.y,this.z-n.z):new t(this.x-n,this.y-n,this.z-n)},multiply:function(n){return n instanceof t?new t(this.x*n.x,this.y*n.y,this.z*n.z):new t(this.x*n,this.y*n,this.z*n)},divide:function(n){return n instanceof t?new t(this.x/n.x,this.y/n.y,this.z/n.z):new t(this.x/n,this.y/n,this.z/n)},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},cross:function(n){return new t(this.y*n.z-this.z*n.y,this.z*n.x-this.x*n.z,this.x*n.y-this.y*n.x)},length:function(){return Math.sqrt(this.dot(this))},unit:function(){return this.divide(this.length())},min:function(){return Math.min(Math.min(this.x,this.y),this.z)},max:function(){return Math.max(Math.max(this.x,this.y),this.z)},toAngles:function(){return{theta:Math.atan2(this.z,this.x),phi:Math.asin(this.y/this.length())}},angleTo:function(t){return Math.acos(this.dot(t)/(this.length()*t.length()))},toArray:function(t){return[this.x,this.y,this.z].slice(0,t||3)},clone:function(){return new t(this.x,this.y,this.z)},init:function(t,n,e){return this.x=t,this.y=n,this.z=e,this}},t.negative=function(t,n){return n.x=-t.x,n.y=-t.y,n.z=-t.z,n},t.add=function(n,e,i){return e instanceof t?(i.x=n.x+e.x,i.y=n.y+e.y,i.z=n.z+e.z):(i.x=n.x+e,i.y=n.y+e,i.z=n.z+e),i},t.subtract=function(n,e,i){return e instanceof t?(i.x=n.x-e.x,i.y=n.y-e.y,i.z=n.z-e.z):(i.x=n.x-e,i.y=n.y-e,i.z=n.z-e),i},t.multiply=function(n,e,i){return e instanceof t?(i.x=n.x*e.x,i.y=n.y*e.y,i.z=n.z*e.z):(i.x=n.x*e,i.y=n.y*e,i.z=n.z*e),i},t.divide=function(n,e,i){return e instanceof t?(i.x=n.x/e.x,i.y=n.y/e.y,i.z=n.z/e.z):(i.x=n.x/e,i.y=n.y/e,i.z=n.z/e),i},t.cross=function(t,n,e){return e.x=t.y*n.z-t.z*n.y,e.y=t.z*n.x-t.x*n.z,e.z=t.x*n.y-t.y*n.x,e},t.unit=function(t,n){var e=t.length();return n.x=t.x/e,n.y=t.y/e,n.z=t.z/e,n},t.fromAngles=function(n,e){return new t(Math.cos(n)*Math.cos(e),Math.sin(e),Math.sin(n)*Math.cos(e))},t.randomDirection=function(){return t.fromAngles(Math.random()*Math.PI*2,Math.asin(2*Math.random()-1))},t.min=function(n,e){return new t(Math.min(n.x,e.x),Math.min(n.y,e.y),Math.min(n.z,e.z))},t.max=function(n,e){return new t(Math.max(n.x,e.x),Math.max(n.y,e.y),Math.max(n.z,e.z))},t.lerp=function(t,n,e){return n.subtract(t).multiply(e).add(t)},t.fromArray=function(n){return new t(n[0],n[1],n[2])},t.angleBetween=function(t,n){return t.angleTo(n)},t}();window.Vector=t}(),function(){"use strict";var t=function(){var t=Math.PI/180;function n(n,e,i){this.theta=(n||45)*t,this.phi=(e||45)*t,this.radius=i||1}return n.prototype={down:function(t,n){this.mouse={x:t,y:n}},move:function(n,e){var i=this.mouse;if(i){var r=180*(n-i.x)*t,a=180*(i.y-e)*t;i.x=n,i.y=e,this.theta+=r,this.phi+=a}},up:function(t,n){this.mouse=null},wheel:function(t){this.radius=Math.max(.01,this.radius+.02*t)},render:function(t){var e=n.toVector(this),i=new Float32Array([e.x,e.y,e.z]);this.update(t,"3fv","vec3","u_camera",i)},update:function(t,n,e,i,r){try{var a=t.uniforms[i]=t.uniforms[i]||{};a.name=i,a.value=r,a.type=e,a.method="uniform"+n,a.location=t.gl.getUniformLocation(t.program,i),t.gl[a.method].apply(t.gl,[a.location].concat(a.value))}catch(t){console.log("fastUpdate",t)}}},n.fromVector=function(t){var e=t.length(),i=Math.acos(t.y/e),r=Math.atan(t.x/t.z);return new n(i,r,e)},n.toVector=function(t){var n=Math.sin(t.phi)*t.radius,e=n*Math.sin(t.theta),i=Math.cos(t.phi)*t.radius,r=n*Math.cos(t.theta);return new Vector(e,i,r)},n}();window.CameraService=t}(),function(){"use strict";var t=function(){function t(){this.mouse=new Float32Array([0,0]),this.history=[],this.trails=new Array(10).fill(null).map(function(){return new Float32Array([0,0])})}t.prototype={render:function(t){var n=this.trails,e=this.history,i=this.mouse,r=0,a=n.length,s=e.length?e[0]:i;for(;r<a;){var o=r>0?n[r-1]:s,u=n[r],h=1/(5+r);u[0]+=(o[0]-u[0])*h,u[1]+=(o[1]-u[1])*h,this.update(t,"2fv","vec2","u_trails["+r+"]",u),r++}e.length&&e.shift()},move:function(t,n){var e=this.mouse;e[0]=t,e[1]=n,this.push()},push:function(t,e,i){var r,a,s,o=null,u=0;i||(i={});var h=function(){u=!1===i.leading?0:n(),o=null,s=t.apply(r,a),o||(r=a=null)};return function(){var c=n();u||!1!==i.leading||(u=c);var f=e-(c-u);return r=this,a=arguments,f<=0||f>e?(o&&(clearTimeout(o),o=null),u=c,s=t.apply(r,a),o||(r=a=null)):o||!1===i.trailing||(o=setTimeout(h,f)),s}}(function(){this.history.push(new Float32Array(this.mouse))},1e3/60),update:function(t,n,e,i,r){try{var a=t.uniforms[i]=t.uniforms[i]||{};a.name=i,a.value=r,a.type=e,a.method="uniform"+n,a.location=t.gl.getUniformLocation(t.program,i),t.gl[a.method].apply(t.gl,[a.location].concat(a.value))}catch(t){console.log("fastUpdate",t)}}};var n=Date.now||function(){return(new Date).getTime()};return t}();window.TrailsService=t}(),function(){"use strict";var t,n=new CameraService,e=new TrailsService;function i(t,n){var e=new XMLHttpRequest;e.open("GET",t,!0),e.addEventListener("load",function(){n(e.responseText)}),e.send()}t="",i("playgrounds/lib.glsl",function(r){t=r;var a=function(t){if(""==t)return{};for(var n={},e=0;e<t.length;++e){var i=t[e].split("=",2);1==i.length?n[i[0]]="":n[i[0]]=decodeURIComponent(i[1].replace(/\+/g," "))}return n}(window.location.search.substr(1).split("&")),s=a.glsl||"main";i("playgrounds/"+s+".glsl",function(i){var r=document.querySelector(".editor");r.innerHTML=i;var a=new GlslEditor(r,{canvas_size:400,canvas_draggable:!0,fileDrops:!1,frag_header:t,menu:!1,multipleBuffers:!1,theme:"monokai",watchHash:!1}),s=a.shader.canvas;s.on("render",function(){e.render(s),n.render(s),s.forceRender=!0}),s.on("load",function(){s.uniformTexture("u_texture_0","https://rawgit.com/actarian/plausible-brdf-shader/master/textures/noise/cloud-1.png",{filtering:"mipmap",repeat:!0})}),s.canvas.addEventListener("mousedown",function(t){var e=Math.min(s.canvas.offsetWidth,s.canvas.offsetHeight);n.down(t.x/e,t.y/e)}),s.canvas.addEventListener("mousemove",function(t){var i=Math.min(s.canvas.offsetWidth,s.canvas.offsetHeight);n.move(t.x/i,t.y/i),e.move(t.x,s.canvas.offsetHeight-t.y)}),window.addEventListener("mouseup",function(t){var e=Math.min(s.canvas.offsetWidth,s.canvas.offsetHeight);n.up(t.x/e,t.y/e)}),window.addEventListener("mousewheel",function(t){n.wheel(t.wheelDelta/Math.abs(t.wheelDelta))}),s.canvas.addEventListener("mousemove",function(t){e.move(t.x-a.shader.el.offsetLeft,a.shader.el.offsetTop+a.shader.el.offsetHeight-t.y)})})})}();
//# sourceMappingURL=docs.min.js.map