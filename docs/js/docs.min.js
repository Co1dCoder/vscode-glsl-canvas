!function(){"use strict";var t=function(){function i(t,n,e){this.x=t||0,this.y=n||0,this.z=e||0}return i.prototype={negative:function(){return new i(-this.x,-this.y,-this.z)},add:function(t){return t instanceof i?new i(this.x+t.x,this.y+t.y,this.z+t.z):new i(this.x+t,this.y+t,this.z+t)},subtract:function(t){return t instanceof i?new i(this.x-t.x,this.y-t.y,this.z-t.z):new i(this.x-t,this.y-t,this.z-t)},multiply:function(t){return t instanceof i?new i(this.x*t.x,this.y*t.y,this.z*t.z):new i(this.x*t,this.y*t,this.z*t)},divide:function(t){return t instanceof i?new i(this.x/t.x,this.y/t.y,this.z/t.z):new i(this.x/t,this.y/t,this.z/t)},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},cross:function(t){return new i(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)},length:function(){return Math.sqrt(this.dot(this))},unit:function(){return this.divide(this.length())},min:function(){return Math.min(Math.min(this.x,this.y),this.z)},max:function(){return Math.max(Math.max(this.x,this.y),this.z)},toAngles:function(){return{theta:Math.atan2(this.z,this.x),phi:Math.asin(this.y/this.length())}},angleTo:function(t){return Math.acos(this.dot(t)/(this.length()*t.length()))},toArray:function(t){return[this.x,this.y,this.z].slice(0,t||3)},clone:function(){return new i(this.x,this.y,this.z)},init:function(t,n,e){return this.x=t,this.y=n,this.z=e,this}},i.negative=function(t,n){return n.x=-t.x,n.y=-t.y,n.z=-t.z,n},i.add=function(t,n,e){return n instanceof i?(e.x=t.x+n.x,e.y=t.y+n.y,e.z=t.z+n.z):(e.x=t.x+n,e.y=t.y+n,e.z=t.z+n),e},i.subtract=function(t,n,e){return n instanceof i?(e.x=t.x-n.x,e.y=t.y-n.y,e.z=t.z-n.z):(e.x=t.x-n,e.y=t.y-n,e.z=t.z-n),e},i.multiply=function(t,n,e){return n instanceof i?(e.x=t.x*n.x,e.y=t.y*n.y,e.z=t.z*n.z):(e.x=t.x*n,e.y=t.y*n,e.z=t.z*n),e},i.divide=function(t,n,e){return n instanceof i?(e.x=t.x/n.x,e.y=t.y/n.y,e.z=t.z/n.z):(e.x=t.x/n,e.y=t.y/n,e.z=t.z/n),e},i.cross=function(t,n,e){return e.x=t.y*n.z-t.z*n.y,e.y=t.z*n.x-t.x*n.z,e.z=t.x*n.y-t.y*n.x,e},i.unit=function(t,n){var e=t.length();return n.x=t.x/e,n.y=t.y/e,n.z=t.z/e,n},i.fromAngles=function(t,n){return new i(Math.cos(t)*Math.cos(n),Math.sin(n),Math.sin(t)*Math.cos(n))},i.randomDirection=function(){return i.fromAngles(Math.random()*Math.PI*2,Math.asin(2*Math.random()-1))},i.min=function(t,n){return new i(Math.min(t.x,n.x),Math.min(t.y,n.y),Math.min(t.z,n.z))},i.max=function(t,n){return new i(Math.max(t.x,n.x),Math.max(t.y,n.y),Math.max(t.z,n.z))},i.lerp=function(t,n,e){return n.subtract(t).multiply(e).add(t)},i.fromArray=function(t){return new i(t[0],t[1],t[2])},i.angleBetween=function(t,n){return t.angleTo(n)},i}();window.Vector=t}(),function(){"use strict";var t=function(){var a=Math.PI/180;function r(t,n,e){this.theta=(t||45)*a,this.phi=(n||45)*a,this.radius=e||1}return r.prototype={down:function(t,n){this.mouse={x:t,y:n}},move:function(t,n){var e=this.mouse;if(e){var i=180*(t-e.x)*a,r=180*(e.y-n)*a;e.x=t,e.y=n,this.theta+=i,this.phi+=r}},up:function(t,n){this.mouse=null},wheel:function(t){this.radius=Math.max(.01,this.radius+.02*t)},render:function(t){var n=r.toVector(this),e=new Float32Array([n.x,n.y,n.z]);this.update(t,"3fv","vec3","u_camera",e)},update:function(t,n,e,i,r){try{var a=t.uniforms[i]=t.uniforms[i]||{};a.name=i,a.value=r,a.type=e,a.method="uniform"+n,a.location=t.gl.getUniformLocation(t.program,i),t.gl[a.method].apply(t.gl,[a.location].concat(a.value))}catch(t){console.log("fastUpdate",t)}}},r.fromVector=function(t){var n=t.length(),e=Math.acos(t.y/n),i=Math.atan(t.x/t.z);return new r(e,i,n)},r.toVector=function(t){var n=Math.sin(t.phi)*t.radius,e=n*Math.sin(t.theta),i=Math.cos(t.phi)*t.radius,r=n*Math.cos(t.theta);return new Vector(e,i,r)},r}();window.CameraService=t}(),function(){"use strict";var t=function(){function t(){this.mouse=new Float32Array([0,0]),this.history=[],this.trails=new Array(10).fill(null).map(function(){return new Float32Array([0,0])})}t.prototype={render:function(t){var n=this.trails,e=this.history,i=this.mouse,r=0,a=n.length,s=e.length?e[0]:i;for(;r<a;){var o=0<r?n[r-1]:s,u=n[r],h=1/(5+r);u[0]+=(o[0]-u[0])*h,u[1]+=(o[1]-u[1])*h,this.update(t,"2fv","vec2","u_trails["+r+"]",u),r++}e.length&&e.shift()},move:function(t,n){var e=this.mouse;e[0]=t,e[1]=n,this.push()},push:function(e,i,r){var a,s,o,u=null,h=0;r||(r={});var c=function(){h=!1===r.leading?0:f(),u=null,o=e.apply(a,s),u||(a=s=null)};return function(){var t=f();h||!1!==r.leading||(h=t);var n=i-(t-h);return a=this,s=arguments,n<=0||i<n?(u&&(clearTimeout(u),u=null),h=t,o=e.apply(a,s),u||(a=s=null)):u||!1===r.trailing||(u=setTimeout(c,n)),o}}(function(){this.history.push(new Float32Array(this.mouse))},1e3/60),update:function(t,n,e,i,r){try{var a=t.uniforms[i]=t.uniforms[i]||{};a.name=i,a.value=r,a.type=e,a.method="uniform"+n,a.location=t.gl.getUniformLocation(t.program,i),t.gl[a.method].apply(t.gl,[a.location].concat(a.value))}catch(t){console.log("fastUpdate",t)}}};var f=Date.now||function(){return(new Date).getTime()};return t}();window.TrailsService=t}(),function(){"use strict";var r,a=new CameraService,s=new TrailsService;function i(t,n){var e=new XMLHttpRequest;e.open("GET",t,!0),e.addEventListener("load",function(){n(e.responseText)}),e.send()}r="",i("playgrounds/lib.glsl",function(t){r=t;var n=function(t){if(""==t)return{};for(var n={},e=0;e<t.length;++e){var i=t[e].split("=",2);1==i.length?n[i[0]]="":n[i[0]]=decodeURIComponent(i[1].replace(/\+/g," "))}return n}(window.location.search.substr(1).split("&")),e=n.glsl||"main";i("playgrounds/"+e+".glsl",function(t){var n=document.querySelector(".editor");n.innerHTML=t;var e=new GlslEditor(n,{canvas_size:400,canvas_draggable:!0,fileDrops:!1,frag_header:r,menu:!1,multipleBuffers:!1,theme:"monokai",watchHash:!1}),i=e.shader.canvas;i.on("render",function(){s.render(i),a.render(i),i.forceRender=!0}),i.on("load",function(){i.uniformTexture("u_texture_0","https://rawgit.com/actarian/plausible-brdf-shader/master/textures/noise/cloud-1.png",{filtering:"mipmap",repeat:!0})}),i.canvas.addEventListener("mousedown",function(t){var n=Math.min(i.canvas.offsetWidth,i.canvas.offsetHeight);a.down(t.x/n,t.y/n)}),i.canvas.addEventListener("mousemove",function(t){var n=Math.min(i.canvas.offsetWidth,i.canvas.offsetHeight);a.move(t.x/n,t.y/n),s.move(t.x,i.canvas.offsetHeight-t.y)}),window.addEventListener("mouseup",function(t){var n=Math.min(i.canvas.offsetWidth,i.canvas.offsetHeight);a.up(t.x/n,t.y/n)}),window.addEventListener("mousewheel",function(t){a.wheel(t.wheelDelta/Math.abs(t.wheelDelta))}),i.canvas.addEventListener("mousemove",function(t){s.move(t.x-e.shader.el.offsetLeft,e.shader.el.offsetTop+e.shader.el.offsetHeight-t.y)})})})}();
//# sourceMappingURL=docs.min.js.map
