{"version":3,"sources":["docs/js/docs.js"],"names":["Vector","x","y","z","this","prototype","negative","add","v","subtract","multiply","divide","equals","dot","cross","length","Math","sqrt","unit","min","max","toAngles","theta","atan2","phi","asin","angleTo","a","acos","toArray","n","slice","clone","init","b","c","fromAngles","cos","sin","randomDirection","random","PI","lerp","fraction","fromArray","angleBetween","window","CameraService","RAD","radius","down","mouse","move","up","wheel","d","render","glsl","vector","toVector","array","Float32Array","update","method","type","name","value","u","uniforms","location","gl","getUniformLocation","program","apply","concat","e","console","log","fromVector","atan","camera","spr","TrailsService","history","trails","Array","fill","map","i","t","tx","friction","shift","push","func","wait","options","context","args","result","timeout","previous","later","leading","getNow","now","remaining","arguments","clearTimeout","trailing","setTimeout","throttle","Date","getTime","frag_header","getResource","url","callback","request","XMLHttpRequest","open","addEventListener","responseText","send","data","qso","list","dict","kv","split","decodeURIComponent","replace","search","substr","resource","editorNode","document","querySelector","innerHTML","editor","GlslEditor","canvas_size","canvas_draggable","fileDrops","menu","multipleBuffers","theme","watchHash","shader","canvas","on","forceRender","uniformTexture","filtering","repeat","offsetWidth","offsetHeight","wheelDelta","abs","el","offsetLeft","offsetTop"],"mappings":"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","file":"docs.min.js","sourcesContent":["(function () {\n    'use strict';\n\n    var Vector = function () {\n\n        function Vector(x, y, z) {\n            this.x = x || 0;\n            this.y = y || 0;\n            this.z = z || 0;\n        }\n\n        // Instance Methods\n        // The methods add(), subtract(), multiply(), and divide() can all take either a vector or a number as an argument.\n\n        Vector.prototype = {\n            negative: function () {\n                return new Vector(-this.x, -this.y, -this.z);\n            },\n            add: function (v) {\n                if (v instanceof Vector) return new Vector(this.x + v.x, this.y + v.y, this.z + v.z);\n                else return new Vector(this.x + v, this.y + v, this.z + v);\n            },\n            subtract: function (v) {\n                if (v instanceof Vector) return new Vector(this.x - v.x, this.y - v.y, this.z - v.z);\n                else return new Vector(this.x - v, this.y - v, this.z - v);\n            },\n            multiply: function (v) {\n                if (v instanceof Vector) return new Vector(this.x * v.x, this.y * v.y, this.z * v.z);\n                else return new Vector(this.x * v, this.y * v, this.z * v);\n            },\n            divide: function (v) {\n                if (v instanceof Vector) return new Vector(this.x / v.x, this.y / v.y, this.z / v.z);\n                else return new Vector(this.x / v, this.y / v, this.z / v);\n            },\n            equals: function (v) {\n                return this.x === v.x && this.y === v.y && this.z === v.z;\n            },\n            dot: function (v) {\n                return this.x * v.x + this.y * v.y + this.z * v.z;\n            },\n            cross: function (v) {\n                return new Vector(\n                    this.y * v.z - this.z * v.y,\n                    this.z * v.x - this.x * v.z,\n                    this.x * v.y - this.y * v.x\n                );\n            },\n            length: function () {\n                return Math.sqrt(this.dot(this));\n            },\n            unit: function () {\n                return this.divide(this.length());\n            },\n            min: function () {\n                return Math.min(Math.min(this.x, this.y), this.z);\n            },\n            max: function () {\n                return Math.max(Math.max(this.x, this.y), this.z);\n            },\n            toAngles: function () {\n                return {\n                    theta: Math.atan2(this.z, this.x),\n                    phi: Math.asin(this.y / this.length())\n                };\n            },\n            angleTo: function (a) {\n                return Math.acos(this.dot(a) / (this.length() * a.length()));\n            },\n            toArray: function (n) {\n                return [this.x, this.y, this.z].slice(0, n || 3);\n            },\n            clone: function () {\n                return new Vector(this.x, this.y, this.z);\n            },\n            init: function (x, y, z) {\n                this.x = x;\n                this.y = y;\n                this.z = z;\n                return this;\n            }\n        };\n\n        // Static Methods\n        // Vector.randomDirection() returns a vector with a length of 1 and a statistically uniform direction. Vector.lerp() performs linear interpolation between two vectors.\n\n        Vector.negative = function (a, b) {\n            b.x = -a.x;\n            b.y = -a.y;\n            b.z = -a.z;\n            return b;\n        };\n        Vector.add = function (a, b, c) {\n            if (b instanceof Vector) {\n                c.x = a.x + b.x;\n                c.y = a.y + b.y;\n                c.z = a.z + b.z;\n            } else {\n                c.x = a.x + b;\n                c.y = a.y + b;\n                c.z = a.z + b;\n            }\n            return c;\n        };\n        Vector.subtract = function (a, b, c) {\n            if (b instanceof Vector) {\n                c.x = a.x - b.x;\n                c.y = a.y - b.y;\n                c.z = a.z - b.z;\n            } else {\n                c.x = a.x - b;\n                c.y = a.y - b;\n                c.z = a.z - b;\n            }\n            return c;\n        };\n        Vector.multiply = function (a, b, c) {\n            if (b instanceof Vector) {\n                c.x = a.x * b.x;\n                c.y = a.y * b.y;\n                c.z = a.z * b.z;\n            } else {\n                c.x = a.x * b;\n                c.y = a.y * b;\n                c.z = a.z * b;\n            }\n            return c;\n        };\n        Vector.divide = function (a, b, c) {\n            if (b instanceof Vector) {\n                c.x = a.x / b.x;\n                c.y = a.y / b.y;\n                c.z = a.z / b.z;\n            } else {\n                c.x = a.x / b;\n                c.y = a.y / b;\n                c.z = a.z / b;\n            }\n            return c;\n        };\n        Vector.cross = function (a, b, c) {\n            c.x = a.y * b.z - a.z * b.y;\n            c.y = a.z * b.x - a.x * b.z;\n            c.z = a.x * b.y - a.y * b.x;\n            return c;\n        };\n        Vector.unit = function (a, b) {\n            var length = a.length();\n            b.x = a.x / length;\n            b.y = a.y / length;\n            b.z = a.z / length;\n            return b;\n        };\n        Vector.fromAngles = function (theta, phi) {\n            return new Vector(Math.cos(theta) * Math.cos(phi), Math.sin(phi), Math.sin(theta) * Math.cos(phi));\n        };\n        Vector.randomDirection = function () {\n            return Vector.fromAngles(Math.random() * Math.PI * 2, Math.asin(Math.random() * 2 - 1));\n        };\n        Vector.min = function (a, b) {\n            return new Vector(Math.min(a.x, b.x), Math.min(a.y, b.y), Math.min(a.z, b.z));\n        };\n        Vector.max = function (a, b) {\n            return new Vector(Math.max(a.x, b.x), Math.max(a.y, b.y), Math.max(a.z, b.z));\n        };\n        Vector.lerp = function (a, b, fraction) {\n            return b.subtract(a).multiply(fraction).add(a);\n        };\n        Vector.fromArray = function (a) {\n            return new Vector(a[0], a[1], a[2]);\n        };\n        Vector.angleBetween = function (a, b) {\n            return a.angleTo(b);\n        };\n\n        return Vector;\n    }();\n\n    window.Vector = Vector;\n\n}());\n/* global window, console, Vector */\n\n(function () {\n    'use strict';\n\n    var CameraService = function () {\n\n        var PI = Math.PI;\n        var RAD = PI / 180;\n\n        function CameraService(theta, phi, radius) {\n            var service = this;\n            service.theta = (theta || 45) * RAD;\n            service.phi = (phi || 45) * RAD;\n            service.radius = radius || 1.0;\n        }\n\n        CameraService.prototype = {\n            down: down,\n            move: move,\n            up: up,\n            wheel: wheel,\n            render: render,\n            update: update,\n        };\n\n        CameraService.fromVector = fromVector;\n        CameraService.toVector = toVector;\n\n        // publics\n\n        function down(x, y) {\n            var service = this;\n            service.mouse = {\n                x: x,\n                y: y,\n            };\n        }\n\n        function move(x, y) {\n            var service = this,\n                mouse = service.mouse;\n            if (mouse) {\n                var theta = (x - mouse.x) * 180 * RAD;\n                var phi = (mouse.y - y) * 180 * RAD;\n                mouse.x = x;\n                mouse.y = y;\n                service.theta += theta;\n                service.phi += phi;\n            }\n        }\n\n        function up(x, y) {\n            var service = this;\n            service.mouse = null;\n        }\n\n        function wheel(d) {\n            var service = this;\n            service.radius = Math.max(0.01, service.radius + d * 0.02);\n        }\n\n        function render(glsl) {\n            var service = this;\n            var vector = CameraService.toVector(service);\n            var array = new Float32Array([vector.x, vector.y, vector.z]);\n            service.update(glsl, '3fv', 'vec3', 'u_camera', array);\n        }\n\n        function update(glsl, method, type, name, value) {\n            try {\n                var u = glsl.uniforms[name] = glsl.uniforms[name] || {};\n                u.name = name;\n                u.value = value;\n                u.type = type;\n                u.method = 'uniform' + method;\n                u.location = glsl.gl.getUniformLocation(glsl.program, name);\n                glsl.gl[u.method].apply(glsl.gl, [u.location].concat(u.value));\n            } catch (e) {\n                console.log('fastUpdate', e);\n            }\n        }\n\n        // statics\n\n        function fromVector(vector) {\n            var radius = vector.length();\n            var theta = Math.acos(vector.y / radius); //theta\n            var phi = Math.atan(vector.x / vector.z); //phi\n            return new CameraService(theta, phi, radius);\n        }\n\n        function toVector(camera) {\n            var spr = Math.sin(camera.phi) * camera.radius;\n            var x = spr * Math.sin(camera.theta);\n            var y = Math.cos(camera.phi) * camera.radius;\n            var z = spr * Math.cos(camera.theta);\n            return new Vector(x, y, z);\n        }\n\n        return CameraService;\n\n    }();\n\n    window.CameraService = CameraService;\n\n}());\n/* global window, document, console */\n\n(function () {\n    'use strict';\n\n    var TrailsService = function () {\n\n        function TrailsService() {\n            var service = this;\n            service.mouse = new Float32Array([0.0, 0.0]);\n            service.history = [];\n            service.trails = new Array(10).fill(null).map(function () {\n                return new Float32Array([0.0, 0.0]);\n            });\n        }\n\n        TrailsService.prototype = {\n            render: render,\n            move: move,\n            push: throttle(_push, 1000 / 60),\n            update: update,\n        };\n\n        // statics\n\n        var getNow = Date.now || function () {\n            return new Date().getTime();\n        };\n\n        function throttle(func, wait, options) {\n            // Returns a function, that, when invoked, will only be triggered at most once\n            // during a given window of time. Normally, the throttled function will run\n            // as much as it can, without ever going more than once per `wait` duration;\n            // but if you'd like to disable the execution on the leading edge, pass\n            // `{leading: false}`. To disable execution on the trailing edge, ditto.\n            var context, args, result;\n            var timeout = null;\n            var previous = 0;\n            if (!options) options = {};\n            var later = function () {\n                previous = options.leading === false ? 0 : getNow();\n                timeout = null;\n                result = func.apply(context, args);\n                if (!timeout) context = args = null;\n            };\n            return function () {\n                var now = getNow();\n                if (!previous && options.leading === false) previous = now;\n                var remaining = wait - (now - previous);\n                context = this;\n                args = arguments;\n                if (remaining <= 0 || remaining > wait) {\n                    if (timeout) {\n                        clearTimeout(timeout);\n                        timeout = null;\n                    }\n                    previous = now;\n                    result = func.apply(context, args);\n                    if (!timeout) context = args = null;\n                } else if (!timeout && options.trailing !== false) {\n                    timeout = setTimeout(later, remaining);\n                }\n                return result;\n            };\n        }\n\n        // publics\n\n        var ti = 0;\n\n        function render(glsl) {\n            var service = this;\n            var trails = service.trails,\n                history = service.history,\n                mouse = service.mouse;\n\n            var i = 0,\n                t = trails.length;\n            var tx = history.length ? history[0] : mouse;\n            while (i < t) {\n                var e = (i > 0 ? trails[i - 1] : tx);\n                var v = trails[i];\n                var friction = 1.0 / (5.0 + i);\n                v[0] += (e[0] - v[0]) * friction;\n                v[1] += (e[1] - v[1]) * friction;\n                service.update(glsl, '2fv', 'vec2', 'u_trails[' + i + ']', v);\n                i++;\n            }\n            if (history.length) {\n                history.shift();\n            }\n        }\n\n        function move(x, y) {\n            var service = this,\n                mouse = service.mouse;\n            mouse[0] = x;\n            mouse[1] = y;\n            service.push();\n        }\n\n        function _push() {\n            var service = this;\n            service.history.push(new Float32Array(service.mouse));\n        }\n\n        function update(glsl, method, type, name, value) {\n            try {\n                var u = glsl.uniforms[name] = glsl.uniforms[name] || {};\n                u.name = name;\n                u.value = value;\n                u.type = type;\n                u.method = 'uniform' + method;\n                u.location = glsl.gl.getUniformLocation(glsl.program, name);\n                glsl.gl[u.method].apply(glsl.gl, [u.location].concat(u.value));\n            } catch (e) {\n                console.log('fastUpdate', e);\n            }\n        }\n\n        return TrailsService;\n    }();\n\n    window.TrailsService = TrailsService;\n\n}());\n/* global window, document, console, GlslEditor, CameraService, TrailsService */\n\n(function () {\n    'use strict';\n\n    var camera = new CameraService();\n\n    var trails = new TrailsService();\n\n    init();\n\n    function init() {\n        var frag_header = '';\n        getResource(\"playgrounds/lib.glsl\", function (data) {\n            frag_header = data;\n            var qso = getQuerystring();\n            var resource = qso.glsl || 'main';\n            getResource('playgrounds/' + resource + '.glsl', function (data) {\n                var editorNode = document.querySelector('.editor');\n                editorNode.innerHTML = data;\n                var editor = new GlslEditor(editorNode, {\n                    canvas_size: 400,\n                    canvas_draggable: true,\n                    fileDrops: false,\n                    frag_header: frag_header,\n                    menu: false,\n                    multipleBuffers: false,\n                    theme: 'monokai',\n                    watchHash: false,\n                });\n                // console.log('editor', editor);\n                var glsl = editor.shader.canvas;\n                glsl.on('render', function () {\n                    trails.render(glsl);\n                    camera.render(glsl);\n                    glsl.forceRender = true;\n                });\n                glsl.on('load', function () {\n                    glsl.uniformTexture('u_texture_0', 'https://rawgit.com/actarian/plausible-brdf-shader/master/textures/noise/cloud-1.png', {\n                        filtering: 'mipmap',\n                        repeat: true,\n                    });\n                });\n\n                function onDown(e) {\n                    var min = Math.min(glsl.canvas.offsetWidth, glsl.canvas.offsetHeight);\n                    camera.down(e.x / min, e.y / min);\n                }\n\n                function onMove(e) {\n                    var min = Math.min(glsl.canvas.offsetWidth, glsl.canvas.offsetHeight);\n                    camera.move(e.x / min, e.y / min);\n                    trails.move(e.x, glsl.canvas.offsetHeight - e.y);\n                }\n\n                function onUp(e) {\n                    var min = Math.min(glsl.canvas.offsetWidth, glsl.canvas.offsetHeight);\n                    camera.up(e.x / min, e.y / min);\n                }\n\n                function onWheel(e) {\n                    camera.wheel(e.wheelDelta / Math.abs(e.wheelDelta));\n                }\n\n                glsl.canvas.addEventListener('mousedown', onDown);\n                glsl.canvas.addEventListener('mousemove', onMove);\n                window.addEventListener('mouseup', onUp);\n                window.addEventListener('mousewheel', onWheel);\n\n                glsl.canvas.addEventListener('mousemove', function onMove(e) {\n                    trails.move(e.x - editor.shader.el.offsetLeft, editor.shader.el.offsetTop + editor.shader.el.offsetHeight - e.y);\n                });\n            });\n            // var nodes = document.querySelectorAll('code');\n            // forEach(nodes, function (i, node) { });\n        });\n    }\n\n    function forEach(array, callback, scope) {\n        for (var i = 0; i < array.length; i++) {\n            callback.call(scope, i, array[i]); // passes back stuff we need\n        }\n    }\n\n    function getResource(url, callback) {\n        var request = new XMLHttpRequest();\n        request.open('GET', url, true);\n        request.addEventListener('load', function () {\n            callback(request.responseText);\n        });\n        request.send();\n    }\n\n    function getQuerystring() {\n        var q = (function (list) {\n            if (list == '') return {};\n            var dict = {};\n            for (var i = 0; i < list.length; ++i) {\n                var kv = list[i].split('=', 2);\n                if (kv.length == 1) {\n                    dict[kv[0]] = '';\n                } else {\n                    dict[kv[0]] = decodeURIComponent(kv[1].replace(/\\+/g, ' '));\n                }\n            }\n            return dict;\n        })(window.location.search.substr(1).split('&'));\n        return q;\n    }\n\n}());"]}