!function(){"use strict";function e(){function e(){document.querySelector(".errors").setAttribute("class","errors"),document.querySelector(".welcome").setAttribute("class",options.uri?"welcome":"welcome active");var e=window.options;e.vertex=e.vertex.trim().length>0?e.vertex:null,e.fragment=e.fragment.trim().length>0?e.fragment:null,p.load(e.fragment,e.vertex);for(var t in e.uniforms)p.setUniform(t,e.uniforms[t]);for(var r in e.textures)p.setUniform("u_texture_"+r,e.textures[r]);document.querySelector("body").setAttribute("class",e.fragment||e.vertex?"ready":"empty")}function r(){var e=l.offsetWidth+c,t=l.offsetHeight+c;u.style.width=e+"px",u.style.height=t+"px",u.width=e,u.height=t,c=0}function s(){m.pause=!m.pause,p.paused?(p.timePause&&(p.timePrev=new Date,p.timeLoad+=p.timePrev-p.timePause),p.play(),d.pause.querySelector("i").setAttribute("class","icon-pause")):(p.pause(),p.timePause=new Date,d.pause.querySelector("i").setAttribute("class","icon-play"))}function n(){m.record=!m.record,m.record?d.record.querySelector("i").setAttribute("class","icon-stop"):d.record.querySelector("i").setAttribute("class","icon-record")}function a(){function e(){v.update(),m.stats&&requestAnimationFrame(e)}m.stats=!m.stats,m.stats?(f?f.style.visibility="visible":(v=new Stats,v.showPanel(0),f=v.dom,f.style.cssText="position:fixed;top:0;right:0;cursor:pointer;opacity:0.9;z-index:10000",document.body.appendChild(v.dom)),requestAnimationFrame(e),d.stats.setAttribute("class","btn active")):(f&&(f.style.visibility="hidden"),d.stats.setAttribute("class","btn"))}function i(e){console.log("createShader",e),window.parent.postMessage({command:"did-click-link",data:"command:glsl-canvas.createShader?"+JSON.stringify([options.uri])},"file://")}function o(t){window.options=JSON.parse(t.data),e()}var c=1,l=document.querySelector(".content"),u=document.querySelector(".shader"),d={pause:document.querySelector(".btn-pause"),record:document.querySelector(".btn-record"),stats:document.querySelector(".btn-stats"),create:document.querySelector(".btn-create")},m={toggle:!1,record:!1,stats:!1};r();var p=new GlslCanvas(u);p.on("error",t),e();var v,f;document.addEventListener("dblclick",s),d.pause.addEventListener("mousedown",s),d.record.addEventListener("mousedown",n),d.stats.addEventListener("mousedown",a),d.create.addEventListener("click",i),window.addEventListener("message",o,!1),window.addEventListener("resize",r),r()}function t(e){var t=window.options,r=[],s=[];e.error.replace(/ERROR: \d+:(\d+): \'(.+)\' : (.+)/g,function(e,s,n,a){var i="ERROR ("+n+") "+a,o='<li><a class="error" unselectable data-line="'+Number(s)+'" href="'+encodeURI("command:glsl-canvas.revealGlslLine?"+JSON.stringify([t.uri,Number(s),i]))+'"><span class="line">ERROR line '+Number(s)+'</span> <span class="value" title="'+n+'">'+n+'</span> <span class="text" title="'+a+'">'+a+"</span></a></li>";return r.push(o),o}),e.error.replace(/WARNING: \d+:(\d+): \'(.*\n*|.*|\n*)\' : (.+)/g,function(r,n,a,i){var o='<li><a class="warning" unselectable data-line="'+Number(n)+'" href="'+encodeURI("command:glsl-canvas.revealGlslLine?"+JSON.stringify([t.uri,Number(n),e]))+'"><span class="line">WARN line '+Number(n)+'</span> <span class="text" title="'+i+'">'+i+"</span></a></li>";return s.push(o),o});var n='<div class="errors-content"><h4>glslCanvas error</h4><ul>';n+=r.join("\n"),n+=s.join("\n"),n+="</ul></div>",document.querySelector(".errors").setAttribute("class","errors active"),document.querySelector(".errors").innerHTML=n,r.length&&document.querySelectorAll(".error")[0].click()}window.addEventListener("load",e)}();
//# sourceMappingURL=shader.min.js.map
