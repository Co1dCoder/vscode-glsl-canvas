!function(){"use strict";function e(e){var t=window.options,n=[],s=[];e.error.replace(/ERROR: \d+:(\d+): \'(.+)\' : (.+)/g,function(e,s,r,i){var a="ERROR ("+r+") "+i,o='<li><a class="error" unselectable data-line="'+Number(s)+'" href="'+encodeURI("command:glsl-canvas.revealGlslLine?"+JSON.stringify([t.uri,Number(s),a]))+'"><span class="line">ERROR line '+Number(s)+'</span> <span class="value" title="'+r+'">'+r+'</span> <span class="text" title="'+i+'">'+i+"</span></a></li>";return n.push(o),o}),e.error.replace(/WARNING: \d+:(\d+): \'(.*\n*|.*|\n*)\' : (.+)/g,function(n,r,i,a){var o='<li><a class="warning" unselectable data-line="'+Number(r)+'" href="'+encodeURI("command:glsl-canvas.revealGlslLine?"+JSON.stringify([t.uri,Number(r),e]))+'"><span class="line">WARN line '+Number(r)+'</span> <span class="text" title="'+a+'">'+a+"</span></a></li>";return s.push(o),o});var r='<div id="error"><h4>glslCanvas error</h4><ul>';r+=n.join("\n"),r+=s.join("\n"),r+="</ul></div>",document.getElementById("content").innerHTML=r,n.length&&document.querySelectorAll(".error")[0].click()}window.addEventListener("load",function(){var t=1,n=document.getElementById("content"),s=document.getElementById("shader"),r={pause:document.querySelector("#pause"),record:document.querySelector("#record"),stats:document.querySelector("#stats")},i={toggle:!1,record:!1,stats:!1};d();var a,o,l=new GlslCanvas(s);function c(){var e=window.options;for(var t in e.vertex.trim().length>0?l.load(e.fragment,e.vertex):e.fragment&&l.load(e.fragment),e.uniforms)l.setUniform(t,e.uniforms[t]);for(var n in e.textures)l.setUniform("u_texture_"+n,e.textures[n])}function d(){var e=n.offsetWidth+t,r=n.offsetHeight+t;s.style.width=e+"px",s.style.height=r+"px",s.width=e,s.height=r,t=0}function u(){i.pause=!i.pause,console.log("pause",i.pause),l.paused?(l.timePause&&(l.timePrev=new Date,l.timeLoad+=l.timePrev-l.timePause),l.play(),r.pause.querySelector("i").setAttribute("class","icon-pause")):(l.pause(),l.timePause=new Date,r.pause.querySelector("i").setAttribute("class","icon-play"))}l.on("error",e),c(),r.pause.addEventListener("mousedown",u),r.record.addEventListener("mousedown",function(){i.record=!i.record,console.log("record",i.record),i.record?r.record.querySelector("i").setAttribute("class","icon-stop"):r.record.querySelector("i").setAttribute("class","icon-record")}),r.stats.addEventListener("mousedown",function(){i.stats=!i.stats,i.stats?(o?o.style.visibility="visible":((a=new Stats).showPanel(0),(o=a.dom).style.cssText="position:fixed;top:0;right:0;cursor:pointer;opacity:0.9;z-index:10000",document.body.appendChild(a.dom)),requestAnimationFrame(function e(){a.update(),i.stats&&requestAnimationFrame(e)}),r.stats.setAttribute("class","btn active")):(o&&(o.style.visibility="hidden"),r.stats.setAttribute("class","btn"))}),document.addEventListener("dblclick",u),window.addEventListener("message",function(e){window.options=JSON.parse(e.data),console.log("onMessage",window.options),c()},!1),window.addEventListener("resize",d),d()})}();
//# sourceMappingURL=shader.min.js.map
