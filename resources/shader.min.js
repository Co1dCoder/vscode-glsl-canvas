!function(){"use strict";function e(){function e(){var e=d.offsetWidth+i,t=d.offsetHeight+i;l.style.width=e+"px",l.style.height=t+"px",l.width=e,l.height=t,i=0}function n(){u.pause=!u.pause,console.log("pause",u.pause),m.paused?(m.timePause&&(m.timePrev=new Date,m.timeLoad+=m.timePrev-m.timePause),m.play(),c.pause.querySelector("i").setAttribute("class","icon-pause")):(m.pause(),m.timePause=new Date,c.pause.querySelector("i").setAttribute("class","icon-play"))}function s(){u.record=!u.record,console.log("record",u.record),u.record?c.record.querySelector("i").setAttribute("class","icon-stop"):c.record.querySelector("i").setAttribute("class","icon-record")}function r(){function e(){p.update(),u.stats&&requestAnimationFrame(e)}u.stats=!u.stats,u.stats?(v?v.style.visibility="visible":(p=new Stats,p.showPanel(0),v=p.dom,v.style.cssText="position:fixed;top:0;right:0;cursor:pointer;opacity:0.9;z-index:10000",document.body.appendChild(p.dom)),requestAnimationFrame(e),c.stats.setAttribute("class","btn active")):(v&&(v.style.visibility="hidden"),c.stats.setAttribute("class","btn"))}var i=1,a=document.getElementById("fragment").innerHTML,o=document.getElementById("vertex").innerHTML,d=document.getElementById("content"),l=document.getElementById("shader"),c={pause:document.querySelector("#pause"),record:document.querySelector("#record"),stats:document.querySelector("#stats")},u={toggle:!1,record:!1,stats:!1};e();var m=new GlslCanvas(l);m.on("error",t),function(){o.trim().length>0?m.load(a,o):a&&m.load(a);for(var e in window.uniforms)m.setUniform(e,window.uniforms[e]);for(var e in window.textures)m.setUniform("u_texture_"+e,window.textures[e])}();var p,v;c.pause.addEventListener("mousedown",n),c.record.addEventListener("mousedown",s),c.stats.addEventListener("mousedown",r),document.addEventListener("dblclick",n),window.addEventListener("resize",e),e()}function t(e){var t=[],n=[];e.error.replace(/ERROR: \d+:(\d+): \'(.+)\' : (.+)/g,function(e,n,s,r){var i='<li><a class="error" unselectable data-line="'+Number(n)+'" href="'+encodeURI("command:glsl-canvas.revealGlslLine?"+JSON.stringify([window.command,Number(n)]))+'"><span class="line">ERROR line '+Number(n)+'</span> <span class="value" title="'+s+'">'+s+'</span> <span class="text" title="'+r+'">'+r+"</span></a></li>";return t.push(i),i}),e.error.replace(/WARNING: \d+:(\d+): \'(.*\n*|.*|\n*)\' : (.+)/g,function(e,t,s,r){var i='<li><a class="warning" unselectable data-line="'+Number(t)+'" href="'+encodeURI("command:glsl-canvas.revealGlslLine?"+JSON.stringify([window.command,Number(t)]))+'"><span class="line">WARN line '+Number(t)+'</span> <span class="text" title="'+r+'">'+r+"</span></a></li>";return n.push(i),i});var s='<div id="error"><h4>glslCanvas error</h4><ul>';s+=t.join("\n"),s+=n.join("\n"),s+="</ul></div>",document.getElementById("content").innerHTML=s}window.addEventListener("load",e)}();
//# sourceMappingURL=shader.min.js.map
